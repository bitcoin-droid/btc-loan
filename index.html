<!DOCTYPE html>
<html lang="en">
<head>
  <script src="api.js"></script>
  <meta charset="UTF-8" />
  <title>Bitcoin Loan Platform</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont;
      background: linear-gradient(180deg, #000 0%, #050505 100%);
      color: #fff;
    }

    .page {
      display: none;
      min-height: 100vh;
      padding: 24px;
    }

    .active {
      display: block;
    }

    .card {
      background: #0d0d0d;
      border: 1px solid #1f1f1f;
      border-radius: 16px;
      padding: 24px;
      max-width: 420px;
      margin: auto;
      box-shadow: 0 20px 40px rgba(0,0,0,0.6);
    }

    h1, h2 {
      margin-top: 0;
    }

    p {
      color: #b5b5b5;
      line-height: 1.6;
    }

    input {
      width: 100%;
      padding: 14px;
      margin-top: 12px;
      border-radius: 10px;
      border: none;
      background: #151515;
      color: #fff;
      font-size: 16px;
    }

    button {
      width: 100%;
      padding: 14px;
      margin-top: 16px;
      border-radius: 10px;
      border: none;
      background: #16a34a;
      color: #fff;
      font-size: 16px;
      font-weight: 600;
    }

    .secondary {
      background: #1f1f1f;
    }

    .logo {
      text-align: center;
      font-weight: 800;
      letter-spacing: 1px;
      margin-bottom: 20px;
    }

    .stat {
      background: #111;
      padding: 16px;
      border-radius: 12px;
      margin-top: 16px;
      text-align: center;
    }

    .highlight {
      color: #22c55e;
      font-weight: bold;
      font-size: 20px;
    }
  </style>
</head>

<body>

<!-- HOME -->
<div id="home" class="page active">
  <div class="card">
    <div class="logo">₿ BITLOAN</div>
    <h1>Bitcoin-Backed Loans</h1>
    <p>
      Access fast liquidity using Bitcoin collateral.
      Transparent terms. 10% collateral requirement.
    </p>
    <button onclick="go('register')">Create Account</button>
    <button class="secondary" onclick="go('login')">Sign In</button>
  </div>
</div>

<!-- REGISTER -->
<div id="register" class="page">
  <div class="card">
    <h2>Create Account</h2>
    <p>Register to access your loan dashboard.</p>
    <input placeholder="Email address" id="regEmail">
    <input type="password" placeholder="Password">
    <button onclick="register()">Continue</button>
  </div>
</div>

<!-- LOGIN -->
<div id="login" class="page">
  <div class="card">
    <h2>Sign In</h2>
    <p>Access your existing account.</p>
    <input placeholder="Email address" id="loginEmail">
    <button onclick="login()">Login</button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="page">
  <div class="card">
    <h2>Dashboard</h2>
    <p>No active loan</p>
    <button onclick="go('calculator')">Loan Calculator</button>
    <button class="secondary" onclick="go('apply')">Apply for Loan</button>
  </div>
</div>

<!-- CALCULATOR -->
<div id="calculator" class="page">
  <div class="card">
    <h2>Loan Calculator</h2>
    <p>Collateral required is 10% of loan value.</p>
    <input type="number" placeholder="Loan amount (USD)" oninput="calc(this.value)">
    <div class="stat">
      Collateral Required
      <div class="highlight" id="collateral">$0.00</div>
    </div>
    <button class="secondary" onclick="go('dashboard')">Back</button>
  </div>
</div>

<!-- APPLY -->
<div id="apply" class="page">
  <div class="card">
    <h2>Apply for Loan</h2>
    <p>Confirm loan request and proceed.</p>
    <input type="number" placeholder="Loan amount (USD)" id="loanAmount">
    <button onclick="submitLoan()">Submit Application</button>
  </div>
</div>
<!-- BITCOIN PAYMENT -->
<div id="payment" class="page">
  <div class="card">
    <h2>Collateral Payment</h2>
    <p>
      To proceed with your loan application, please send the required
      Bitcoin collateral to the address below.
    </p>

    <div class="stat">
      Bitcoin Wallet Address
      <div class="highlight" style="font-size:14px; word-break:break-all;">
        bc1qexamplebitcoinaddress1234567890
      </div>
    </div>

    <p style="margin-top:16px">
      Send exactly <b>10%</b> of your loan amount.
      Network fees are your responsibility.
    </p>

    <button onclick="confirmPayment()">I Have Made Payment</button>
  </div>
</div>
<!-- WAITING -->
<div id="waiting" class="page">
  <div class="card">
    <h2>Application Submitted</h2>
    <p>Your collateral payment is being verified.</p>
    <div class="stat">
      Status: <span class="highlight">Pending Approval</span>
    </div>
    <p style="margin-top:16px">
      Approval typically takes up to 24 hours.
      You will be notified by email.
    </p>
  </div>
</div>

<script>
  function go(page) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(page).classList.add('active');
  }

  function register() {
    localStorage.setItem("user", document.getElementById("regEmail").value);
    go('dashboard');
  }

  function login() {
    if (localStorage.getItem("user")) {
      go('dashboard');
    }
  }

  function calc(amount) {
    document.getElementById("collateral").innerText =
      "$" + (amount * 0.1).toFixed(2);
  }

  function applyLoan() {
  go('payment');
  }
}
  function confirmPayment() {
  go('waiting');
  }
  
</script>

<footer style="margin-top:40px;padding:20px;text-align:center;background:#0b0f19;color:#aaa;font-size:14px;">
  <p><strong>BitLoan Technologies Ltd</strong></p>
  <p>Bitcoin-backed lending platform. Digital assets involve risk.</p>
  <p>
    <a href="terms.html" style="color:#4f8cff;">Terms of Service</a> |
    <a href="privacy.html" style="color:#4f8cff;">Privacy Policy</a>
  </p>
  <p>© 2026 BitLoan Technologies Ltd. All rights reserved.</p>
</footer>
  <script>
async function submitLoan() {
  const loanAmount = document.getElementById("loanAmount")?.value || 0;
  const collateral = loanAmount * 0.1;

  const response = await API.applyForLoan({
    amount: loanAmount,
    collateral: collateral,
  });

  alert(
    response.message +
      "\nLoan ID: " +
      response.loanId +
      "\nApproval ETA: 24 hours"
  );
}
</script>
</body>
  </html>
